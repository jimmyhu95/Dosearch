# Dosearch - æœ¬åœ°æ–‡æ¡£åˆ†æä¸æœç´¢ç³»ç»Ÿ

æœ¬åœ°æ–‡æ¡£åˆ†æä¸æœç´¢ç³»ç»Ÿï¼Œæ”¯æŒ PDFã€Wordã€Excelã€PPTã€TXT åŠå›¾ç‰‡ç­‰å¤šç§æ ¼å¼ï¼Œæä¾›æ™ºèƒ½åˆ†ç±»å’Œè¯­ä¹‰æœç´¢åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **æ™ºèƒ½æœç´¢**ï¼šæ”¯æŒå…¨æ–‡æœç´¢å’Œè¯­ä¹‰æœç´¢ï¼Œå¿«é€Ÿæ‰¾åˆ°æ‚¨éœ€è¦çš„æ–‡æ¡£
- ğŸ¤– **AI åˆ†ç±»**ï¼šä¸“ä¸º IT è¡Œä¸šï¼ˆäº§å“ã€æŠ€æœ¯ã€æ ‡ä¹¦ç­‰ 10 å¤§ä¸“ä¸šé¢†åŸŸï¼‰å®šåˆ¶çš„å¤§æ¨¡å‹æ·±åº¦æ–‡æ¡£è§£æ
- ï¿½ï¸ **å›¾ç‰‡è¯†åˆ«**ï¼šæ”¯æŒ PNG/JPG ç­‰å›¾ç‰‡çš„å†…å®¹è¯†åˆ«ä¸æ–‡å­—æå–ï¼ˆåŸºäº qwen3-vl-plusï¼‰
- ğŸ“„ **å¤šæ ¼å¼æ”¯æŒ**ï¼šPDFã€Wordã€Excelã€PPTã€TXTã€PNGã€JPG ç­‰
- ğŸ“ **æœ¬åœ°å­˜å‚¨**ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¿æŠ¤æ‚¨çš„éšç§å®‰å…¨
- âš¡ **é«˜æ€§èƒ½**ï¼šåŸºäº MeiliSearch çš„æ¯«ç§’çº§æœç´¢å“åº”
- ğŸ”’ **å®‰å…¨å¯é **ï¼šå®Œå…¨æœ¬åœ°è¿è¡Œï¼Œæ— éœ€æ‹…å¿ƒæ•°æ®æ³„éœ²
- âš™ï¸ **ç³»ç»Ÿé…ç½®**ï¼šæ”¯æŒé¡µé¢å†…åŠ¨æ€é…ç½® API Keyï¼Œæ— éœ€é‡å¯æœåŠ¡

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**ï¼šNext.js 16 (App Router) + TypeScript
- **æ ·å¼**ï¼šTailwind CSS v4
- **æ•°æ®åº“**ï¼šSQLite (better-sqlite3) + Drizzle ORM
- **æœç´¢å¼•æ“**ï¼šMeiliSearchï¼ˆå…¨æ–‡æœç´¢ï¼‰
- **AI æœåŠ¡**ï¼šé˜¿é‡Œäº‘ç™¾ç‚¼ DashScopeï¼ˆæ–‡æ¡£åˆ†ç±»ã€æ‘˜è¦ã€å›¾ç‰‡è¯†åˆ«ï¼‰
- **æ–‡æ¡£è§£æ**ï¼špdf-parseã€mammothã€xlsxã€jszip

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+
- MeiliSearch å®ä¾‹ï¼ˆæœ¬åœ°äºŒè¿›åˆ¶æˆ– Dockerï¼‰
- é˜¿é‡Œäº‘ç™¾ç‚¼ API Keyï¼ˆå¯é€‰ï¼Œç”¨äº AI åˆ†ç±»å’Œå›¾ç‰‡è¯†åˆ«ï¼‰

### å®‰è£…æ­¥éª¤

1. **å®‰è£…ä¾èµ–**
```bash
npm install
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env.local
# ç¼–è¾‘ .env.local å¡«å…¥é…ç½®ï¼ˆä¹Ÿå¯åœ¨ç³»ç»Ÿé…ç½®é¡µé¢åŠ¨æ€ä¿®æ”¹ï¼‰
```

3. **å¯åŠ¨ MeiliSearch**

**æ–¹å¼ Aï¼šç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶ï¼ˆæ¨èï¼Œæ— éœ€ Dockerï¼‰**
```powershell
# Windows
Invoke-WebRequest -Uri "https://github.com/meilisearch/meilisearch/releases/download/v1.6.0/meilisearch-windows-amd64.exe" -OutFile ".\meilisearch.exe"
.\meilisearch.exe --env development --no-analytics
```

**æ–¹å¼ Bï¼šDocker**
```bash
docker-compose up -d
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

5. **è®¿é—®åº”ç”¨**

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3800`

## ğŸ“– ä½¿ç”¨æŒ‡å—

### æ‰«ææ–‡æ¡£

1. è¿›å…¥ç®¡ç†é¢æ¿ï¼ˆ`/admin`ï¼‰
2. åœ¨"æ–‡æ¡£æ‰«æ"åŒºåŸŸè¾“å…¥è¦æ‰«æçš„æ–‡ä»¶å¤¹è·¯å¾„
3. ç‚¹å‡»"å¼€å§‹æ‰«æ"ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§£æã€åˆ†ç±»å’Œç´¢å¼•æ–‡æ¡£
4. å›¾ç‰‡æ–‡ä»¶ä¼šè‡ªåŠ¨è°ƒç”¨ AI è§†è§‰æ¨¡å‹è¯†åˆ«å†…å®¹

### æœç´¢æ–‡æ¡£

1. åœ¨é¦–é¡µæœç´¢æ¡†è¾“å…¥å…³é”®è¯
2. æ”¯æŒæŒ‰æ–‡ä»¶ç±»å‹ã€åˆ†ç±»ã€æ—¥æœŸèŒƒå›´è¿‡æ»¤
3. ç‚¹å‡»æ–‡æ¡£å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…

### ç³»ç»Ÿé…ç½®

è¿›å…¥"ç³»ç»Ÿé…ç½®"é¡µé¢ï¼ˆé¡µè„šé“¾æ¥ï¼‰å¯åŠ¨æ€é…ç½®ï¼š

| é…ç½®é¡¹ | è¯´æ˜ |
|--------|------|
| é˜¿é‡Œäº‘ç™¾ç‚¼ API Key | ç”¨äº AI åˆ†ç±»ã€æ‘˜è¦ç”Ÿæˆã€å›¾ç‰‡è¯†åˆ« |
| MeiliSearch æœåŠ¡åœ°å€ | MeiliSearch å®ä¾‹åœ°å€ï¼ˆé»˜è®¤ localhost:7700ï¼‰|
| MeiliSearch API Key | ä»…åœ¨å¯ç”¨è®¤è¯æ—¶éœ€è¦å¡«å†™ |

é…ç½®é¡µé¢æ”¯æŒ**è¿æ¥æµ‹è¯•**ï¼Œä¿®æ”¹åç«‹å³ç”Ÿæ•ˆæ— éœ€é‡å¯ã€‚

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `NEXT_PUBLIC_API_URL` | API åŸºç¡€ URL | `http://localhost:38 00` |
| `MEILISEARCH_HOST` | MeiliSearch æœåŠ¡åœ°å€ | `http://localhost:7700` |
| `MEILISEARCH_API_KEY` | MeiliSearch API Key | ç©º |
| `DASHSCOPE_API_KEY` | é˜¿é‡Œäº‘ç™¾ç‚¼ API Key | ç©º |

> **æ³¨æ„**ï¼šç¯å¢ƒå˜é‡é…ç½®å¯è¢«"ç³»ç»Ÿé…ç½®"é¡µé¢ä¸­çš„æ•°æ®åº“é…ç½®è¦†ç›–ï¼Œä¼˜å…ˆçº§ï¼šDB é…ç½® > ç¯å¢ƒå˜é‡ > é»˜è®¤å€¼ã€‚

### æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

| æ ¼å¼ | æ‰©å±•å | è¯´æ˜ |
|------|--------|------|
| PDF | `.pdf` | æ–‡æœ¬æå– |
| Word | `.docx`, `.doc` | æ–‡æœ¬å’Œæ ¼å¼æå– |
| Excel | `.xlsx`, `.xls` | å¤šå·¥ä½œè¡¨æ”¯æŒ |
| PowerPoint | `.pptx`, `.ppt` | å¹»ç¯ç‰‡åŠå¤‡æ³¨ |
| çº¯æ–‡æœ¬ | `.txt` | å¤šç§ç¼–ç æ”¯æŒ |
| å›¾ç‰‡ | `.png`, `.jpg`, `.jpeg`, `.gif`, `.webp` | AI è§†è§‰è¯†åˆ«ï¼ˆéœ€é…ç½® API Keyï¼‰|

## ğŸ“ é¡¹ç›®ç»“æ„

```
doc-search-system/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ admin/              # ç®¡ç†é¢æ¿ï¼ˆå«ç³»ç»Ÿé…ç½®å­é¡µï¼‰
â”‚   â”‚   â”œâ”€â”€ api/                # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/clear/    # æ•°æ®æ¸…é™¤ API
â”‚   â”‚   â”‚   â”œâ”€â”€ settings/       # ç³»ç»Ÿé…ç½® APIï¼ˆå«è¿æ¥æµ‹è¯•ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ search/         # æœç´¢ API
â”‚   â”‚   â”‚   â”œâ”€â”€ documents/      # æ–‡æ¡£ CRUD API
â”‚   â”‚   â”‚   â””â”€â”€ scan/           # æ‰«æ API
â”‚   â”‚   â”œâ”€â”€ search/             # æœç´¢ç»“æœé¡µ
â”‚   â”‚   â””â”€â”€ category/           # åˆ†ç±»æµè§ˆé¡µ
â”‚   â”œâ”€â”€ components/             # React ç»„ä»¶
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ db/                 # SQLite æ•°æ®åº“å±‚
â”‚   â”‚   â”œâ”€â”€ parsers/            # æ–‡æ¡£è§£æå™¨ï¼ˆå« image-parserï¼‰
â”‚   â”‚   â”œâ”€â”€ search/             # æœç´¢å¼•æ“é›†æˆ
â”‚   â”‚   â”œâ”€â”€ classifier/         # AI åˆ†ç±»å™¨
â”‚   â”‚   â”œâ”€â”€ scanner/            # æ–‡ä»¶æ‰«æå™¨
â”‚   â”‚   â”œâ”€â”€ settings.ts         # è¿è¡Œæ—¶é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ types/                  # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ data/                       # æœ¬åœ°æ•°æ®ç›®å½•ï¼ˆDB + å‘é‡ï¼‰
â”œâ”€â”€ meilisearch.exe             # MeiliSearch äºŒè¿›åˆ¶ï¼ˆWindowsï¼‰
â”œâ”€â”€ docker-compose.yml          # Docker é…ç½®ï¼ˆMeiliSearchï¼‰
â””â”€â”€ .env.local                  # æœ¬åœ°ç¯å¢ƒå˜é‡
```

## ğŸ—‘ï¸ æ•°æ®ç®¡ç†

åœ¨ç®¡ç†é¢æ¿åº•éƒ¨"å±é™©æ“ä½œ"åŒºåŸŸå¯ä»¥ï¼š

- **æ¸…é™¤æ‰«æå†å²**ï¼šä»…åˆ é™¤æ‰«æè®°å½•ï¼Œä¸å½±å“æ–‡æ¡£æ•°æ®
- **æ¸…é™¤æ‰€æœ‰æ–‡æ¡£è®°å½•**ï¼šåˆ é™¤å…¨éƒ¨æ–‡æ¡£ã€å…³é”®è¯ã€åˆ†ç±»åŠ MeiliSearch æœç´¢ç´¢å¼•ï¼ˆä¸å¯æ’¤é”€ï¼‰

## ğŸ“ API æ–‡æ¡£

### æœç´¢
```
GET /api/search?q=å…³é”®è¯&page=1&limit=20&mode=hybrid
```

### æ–‡æ¡£
```
GET    /api/documents          # è·å–æ–‡æ¡£åˆ—è¡¨
GET    /api/documents/:id      # è·å–å•ä¸ªæ–‡æ¡£
DELETE /api/documents/:id      # åˆ é™¤æ–‡æ¡£
```

### æ‰«æ
```
POST /api/scan                 # å¯åŠ¨æ‰«æ
GET  /api/scan                 # è·å–æ‰«æå†å²
```

### ç³»ç»Ÿé…ç½®
```
GET /api/settings              # è·å–é…ç½®çŠ¶æ€ï¼ˆè„±æ•ï¼‰
PUT /api/settings              # æ›´æ–°é…ç½®
POST /api/settings/test        # æµ‹è¯•è¿æ¥ï¼ˆtype=dashscope|meilisearchï¼‰
```

### æ•°æ®æ¸…é™¤
```
DELETE /api/admin/clear?target=history   # æ¸…é™¤æ‰«æå†å²
DELETE /api/admin/clear?target=all       # æ¸…é™¤æ‰€æœ‰æ•°æ®
```

## ğŸ“„ Info

Designed By Jimmy
